\begin{discussion}
  \label{idec/diffusion/discrete/steady_state/primal_weak_solve-discussion}
  We are going to derive a solution to
  \Cref{idec/diffusion/discrete/steady_state/primal_weak-formulation}.
  For any $p \in \{0, ..., d\}$ denote
  \begin{equation}
    n_p := \abs{K_p} = \dim(C_p K) = \dim(C^p K).
  \end{equation}
  The cochains $(N^0, ..., N^{n_0 - 1})$ form the standard basis of $C^0 K$.
  Define the matrix $A \in M_{n_0 \times n_0}(\R)$ by
  \begin{equation}
    A_{i, j} := \inner{\delta N^i}{\tilde{\kappa}_1 \delta_0 N^i}_{K, 1}, \
    i, j = 0, ..., n_0 - 1,
  \end{equation}
  and the vectors $b, b^N, b^f \in \R^{n_0}$ by
  \begin{subequations}
    \begin{alignat}{3}
      & b_i
      && := (\tr_{\Gamma_N, 0} N^i \smile g_N^{d - 1})[\Gamma_N], \enspace
      && i = 0, ..., n_0 - 1, \\
%
      & b^f_i
      && := (N^i \smile f^d)[K], \enspace
      && i = 0, ..., n_0 - 1, \\
%
      & b
      && := b^N + b^f.
      &&
    \end{alignat}
  \end{subequations}
  Denote the unknown coefficients of $u^0$ as $\{x_j\}_{j = 0}^{n_0 - 1}$, i.e.,
  \begin{equation}
    u^0 = \sum_{j = 0}^{n_0 - 1} x_j N^j
  \end{equation}
  Finally, let $I$ be the set of nodes on the Dirichlet boundary $\Gamma_D$, and
  $J := \{0, ..., n_0 - 1\} \setminus I$.
  We get the system
  \begin{subequations}
    \begin{alignat}{3}
      & \sum_{j = 0}^{n_0 - 1} A_{i, j} x_j
      && = b_i, \enspace
      && i \in J, \\
%
      & x_i
      && = g_D^0(N_i), \enspace
      && i \in I.
    \end{alignat}
  \end{subequations}
  This leads to the system of equations
  \begin{equation}
    \sum_{j \in J} A_{i, j} x_j = b_i - \sum_{j \in I} A_{i, j} g_D^0(N_j),\
    i \in J.
  \end{equation}
  If we denote by $A^J$ the restriction of $A$ to the rows and columns in $J$,
  by $b^J$ the right-hand side of the above equation (again only for the
  indices in J), and by $x^J$ the restriction of $x$ on indices in $J$,
  we arrive at the final linear system with positive-definite matrix $A^J$:
  \begin{equation}
    A^J x^J = b^J.
  \end{equation}
  After solving it, we get the final solution
  \begin{equation}
    x_i =
    \begin{cases}
      x^J_i, & i \in J \\
      g_D^0(N_i), & i \in I
    \end{cases}.
  \end{equation}
\end{discussion}
