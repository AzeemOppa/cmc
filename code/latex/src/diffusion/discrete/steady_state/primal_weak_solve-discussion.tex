\begin{discussion}
  \label{cmc/diffusion/discrete/steady_state/primal_weak_solve-discussion}
  We are going to derive a solution to
  \Cref{cmc/diffusion/discrete/steady_state/primal_weak-formulation}.
  For any $p \in \{0, ..., D\}$ denote
  \begin{equation}
    n_p := \abs{K_p} = \dim(C_p K) = \dim(C^p K).
  \end{equation}
  The cochains $(N^0, ..., N^{n_0 - 1})$ form the standard basis of $C^0 K$.
  Define the matrix ${\bf A} \in M_{n_0 \times n_0}(\R)$ by
  \begin{equation}
    {\bf A}_{i, j} := \inner{\delta N^i}{\tilde{\kappa} \delta_0 N^i}_{K, 1}, \
    i, j = 0, ..., n_0 - 1,
  \end{equation}
  and the vectors ${\bf F}, {\bf G}, {\bf H} \in \R^{n_0}$ by
  \begin{subequations}
    \begin{alignat}{3}
      & {\bf F}_i
      && := (N^i \smile f)[K], \enspace
      && i = 0, ..., n_0 - 1, \\
      %
      & {\bf G}_i
      && := (\tr_{\Gamma_N, 0} N^i \smile g_N)[\Gamma_N], \enspace
      && i = 0, ..., n_0 - 1, \\
      %
      & {\bf H}
      && := {\bf F} - {\bf G}.
      &&
    \end{alignat}
  \end{subequations}
  Denote the unknown coefficients of $u$ as
  $\{{\bf U}_j\}_{j = 0}^{n_0 - 1}$,
  i.e.,
  \begin{equation}
    u = \sum_{j = 0}^{n_0 - 1} {\bf U}_j N^j
  \end{equation}
  Finally, let $J$ be the set of nodes on the Dirichlet boundary $\Gamma_D$,
  and $\overline{J} := \{0, ..., n_0 - 1\} \setminus J$.
  We get the system
  \begin{subequations}
    \begin{alignat}{3}
      & \sum_{j = 0}^{n_0 - 1} {\bf A}_{i, j} {\bf U}_j
      && = {\bf H}_i, \enspace
      && i \in \overline{J}, \\
      %
      & {\bf U}_i
      && = g_D(N_i), \enspace
      && i \in J.
    \end{alignat}
  \end{subequations}
  This leads to the system of equations
  \begin{equation}
    \sum_{j \in \overline{J}} {\bf A}_{i, j} x_j
    = {\bf H}_i - \sum_{j \in J} {\bf A}_{i, j} g_D(N_j),\ i \in \overline{J}.
  \end{equation}
  Denote by ${\bf A}$ the restriction of $A$ to the rows and columns in
  $\overline{J}$, by $\overline{\bf H}$ the right-hand side of the above
  equation (again only for the indices in $\overline{J}$),
  and by $\overline{\bf U}$ the restriction of ${\bf U}$ on the indices
  in $\overline{J}$.
  We arrive at the final linear system with positive-definite matrix
  $\overline{\bf A}$:
  \begin{equation}
    \overline{\bf A} \overline{\bf U} = \overline{\bf H}.
  \end{equation}
  After solving it, we get the final solution
  \begin{equation}
    \overline{\bf U}_i =
    \begin{cases}
      \overline{\bf U}_i, & i \in \overline{J} \\
      g_D(N_i), & i \in J
    \end{cases}.
  \end{equation}
\end{discussion}
